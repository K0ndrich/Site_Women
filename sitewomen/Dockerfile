# Dokerfile - файл хранит сценарий действий для работы с контейнером

# унаследуем основу из другого Dokerfile для нашего Doker Image (Докер Образ)
FROM python:3.12.2

# устанавливаем постоянные переменные среды
ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED=1

# задает рабочую директорию, которая будет находиться внутри DOKER IMAGE
WORKDIR /usr/src/sitewomen

# копируем файл с зависимостями из . - локального проекта в doker image по указаному
# . - означаел текущий локальный проект
# COPY откуда(из локального проекта) - куда (в doker image)
COPY ./req.txt /usr/src/req.txt

# RUN - выполняет команды внутри doker image , еще до запуска контейнера
# устанавливаем зависимости(стороние библиотеки) для нашего проекта на сервере из скопированого заранее файла с зависимостями
RUN pip install -r /usr/src/req.txt

# копируем весь . - локальный проект в текущую директорию в doker image
# . - означает текущая директория на сервере
COPY . /usr/src/sitewomen

# указываем порт, который будем использовать
EXPOSE 8000

# CMD - выполняет команды в CMD уже после запуска контейнера
# запускаем проект на сервере
# CMD ["python" ,"manage.py", "migrate"]
# CMD ["python","manage.py","runserver","0.0.0.0:8000"]
